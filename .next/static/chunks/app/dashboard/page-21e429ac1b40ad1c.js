(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6101:function(e,t,s){Promise.resolve().then(s.bind(s,1680))},1680:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),r=s(2265),l=s(8223),i=s(7648),n=s(3464);let o="https://kw4d0mgz-3001.brs.devtunnels.ms";function d(){let[e,t]=(0,r.useState)(!1),[s,l]=(0,r.useState)([{role:"assistant",content:"\uD83D\uDC4B Ol\xe1! Sou a Iguana, sua assistente virtual. Como posso ajud\xe1-lo hoje?",timestamp:new Date}]),[i,d]=(0,r.useState)(""),[c,m]=(0,r.useState)(!1),u=(0,r.useRef)(null),x=localStorage.getItem("token");(0,r.useEffect)(()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[s]);let h=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&x&&(console.log("Arquivo selecionado:",s.name),l(e=>[...e,{role:"user",content:"\uD83D\uDCCE Arquivo enviado: ".concat(s.name),timestamp:new Date},{role:"assistant",content:'✅ Arquivo recebido! Quando terminar de enviar todos os documentos, digite "Documentos enviados".',timestamp:new Date}]))},g=async()=>{if(i.trim()&&!c&&x){d(""),l(e=>[...e,{role:"user",content:i,timestamp:new Date}]),m(!0);try{let e=await n.Z.post("".concat(o,"/chatbot/chat"),{message:i,section:"dashboard",sectionTitle:"Assistente Virtual",context:{}},{headers:{Authorization:"Bearer ".concat(x)}});l(t=>[...t,{role:"assistant",content:e.data.message||e.data.response,timestamp:new Date}])}catch(e){console.error("Erro ao enviar mensagem:",e),l(e=>[...e,{role:"assistant",content:"❌ Desculpe, ocorreu um erro. Tente novamente mais tarde.",timestamp:new Date}])}finally{m(!1)}}},p=async e=>{d(e),setTimeout(()=>{g()},100)},b=async e=>{if(!c&&x){l(t=>[...t,{role:"user",content:e,timestamp:new Date}]),m(!0);try{let t=await n.Z.post("".concat(o,"/chatbot/chat"),{message:e,section:"dashboard",sectionTitle:"Assistente Virtual",context:{}},{headers:{Authorization:"Bearer ".concat(x)}});l(e=>[...e,{role:"assistant",content:t.data.message||t.data.response,timestamp:new Date}])}catch(e){console.error("Erro ao enviar mensagem:",e),l(e=>[...e,{role:"assistant",content:"❌ Desculpe, ocorreu um erro. Tente novamente mais tarde.",timestamp:new Date}])}finally{m(!1)}}},f=()=>{let e=s[s.length-1];if((null==e?void 0:e.role)!=="assistant")return[];let t=e.content.toLowerCase();return t.includes("confirmar")?[{label:"✅ Confirmar",action:"confirmar"},{label:"\uD83D\uDD19 Voltar",action:"etapa anterior"}]:t.includes("etapa 1")&&t.includes("ajustar")?[{label:"✅ Confirmar",action:"confirmar"},{label:"\uD83D\uDCDD Ajustar Etapa 1",action:"etapa 1"}]:t.includes("etapa 2")&&t.includes("ajustar")?[{label:"✅ Confirmar",action:"confirmar"},{label:"\uD83D\uDCDD Ajustar Etapa 2",action:"etapa 2"}]:t.includes("etapa 3")&&t.includes("ajustar")?[{label:"✅ Confirmar",action:"confirmar"},{label:"\uD83D\uDCDD Ajustar Etapa 3",action:"etapa 3"}]:t.includes("etapa 4")&&t.includes("ajustar")?[{label:"✅ Confirmar",action:"confirmar"},{label:"\uD83D\uDCDD Ajustar Etapa 4",action:"etapa 4"}]:[]};return(0,a.jsxs)("div",{className:"fixed bottom-6 right-6 z-50",children:[e&&(0,a.jsxs)("div",{className:"mb-4 w-96 bg-white rounded-lg shadow-2xl flex flex-col h-96 border border-gray-200",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4 rounded-t-lg flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Iguana"}),(0,a.jsx)("p",{className:"text-xs opacity-90",children:"Assistente Virtual"})]}),(0,a.jsx)("button",{onClick:()=>t(!1),className:"text-white hover:bg-white/20 rounded-full p-1 transition",children:"✕"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:[1===s.length&&(0,a.jsx)("div",{className:"space-y-2",children:["\uD83D\uDE80 Quero come\xe7ar meu cadastro","\uD83E\uDD14 Como funciona o cadastro?","\uD83D\uDCC4 Quais documentos preciso?","⏱️ Qual o prazo de aprova\xe7\xe3o?","\uD83D\uDCB0 Como recebo pelos servi\xe7os?"].map((e,t)=>(0,a.jsx)("button",{onClick:()=>p(e),className:"w-full text-left px-3 py-2 bg-white border border-gray-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 text-sm text-gray-700 transition",children:e},t))}),s.map((e,t)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-xs px-4 py-2 rounded-lg text-sm ".concat("user"===e.role?"bg-blue-600 text-white rounded-br-none":"bg-white text-gray-900 border border-gray-200 rounded-bl-none"),children:[(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),(0,a.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.role?"opacity-70":"text-gray-500"),children:e.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},t)),!c&&f().length>0&&(0,a.jsx)("div",{className:"flex gap-2 justify-start",children:f().map((e,t)=>(0,a.jsx)("button",{onClick:()=>b(e.action),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-xs font-medium transition shadow-sm",children:e.label},t))}),c&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-white border border-gray-200 px-4 py-2 rounded-lg rounded-bl-none",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200"})]})})}),(0,a.jsx)("div",{ref:u})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 p-3 bg-white rounded-b-lg",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{id:"fileUpload",type:"file",accept:"image/*,.pdf",onChange:h,className:"hidden"}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById("fileUpload"))||void 0===e?void 0:e.click()},disabled:c,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:bg-gray-100 text-xl transition",title:"Enviar arquivo",children:"\uD83D\uDCCE"}),(0,a.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&g(),placeholder:"Digite sua pergunta...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:c}),(0,a.jsx)("button",{onClick:g,disabled:c||!i.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 text-sm font-medium transition",children:"\uD83D\uDCE4"})]})})]}),(0,a.jsx)("button",{onClick:()=>t(!e),className:"w-14 h-14 rounded-full shadow-lg flex items-center justify-center text-2xl transition-all transform hover:scale-110 ".concat(e?"bg-red-600 hover:bg-red-700":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"),children:e?"✕":"\uD83D\uDCAC"})]})}function c(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!0),[o,c]=(0,r.useState)({profileCompletion:75,documentsUploaded:3,servicesActive:2,totalEarnings:0});return((0,r.useEffect)(()=>{(async()=>{try{let e=await l.ON.getMe();t(e.data)}catch(e){window.location.href="/login"}finally{n(!1)}})()},[]),s)?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-xl text-gray-600",children:"Carregando..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4",children:[(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-black text-gray-900",children:"Dashboard"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:["Bem-vindo, ",(null==e?void 0:e.name)||"Prestador","!"]})]}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("providerId"),window.location.href="/"},className:"px-6 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors",children:"Sair"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Perfil Completo"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[o.profileCompletion,"%"]})]}),(0,a.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCCA"})]}),(0,a.jsx)("div",{className:"mt-4 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(o.profileCompletion,"%")}})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Documentos"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[o.documentsUploaded,"/5"]})]}),(0,a.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCC4"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-4",children:["Faltam ",5-o.documentsUploaded," documentos"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-orange-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Servi\xe7os Ativos"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:o.servicesActive})]}),(0,a.jsx)("div",{className:"text-4xl",children:"⚙️"})]}),(0,a.jsx)(i.default,{href:"/services",className:"text-xs text-blue-600 hover:underline mt-4 inline-block",children:"Gerenciar servi\xe7os →"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Ganhos Totais"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["R$ ",o.totalEarnings]})]}),(0,a.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCB0"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"Este m\xeas"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Informa\xe7\xf5es Pessoais"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Nome"}),(0,a.jsx)("p",{className:"text-gray-900 font-semibold",children:(null==e?void 0:e.name)||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900 font-semibold",children:(null==e?void 0:e.email)||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"CPF"}),(0,a.jsx)("p",{className:"text-gray-900 font-semibold",children:(null==e?void 0:e.cpf)||"N\xe3o informado"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Status"}),(0,a.jsx)("p",{className:"text-yellow-600 font-semibold",children:"⏳ Pendente"})]})]}),(0,a.jsx)(i.default,{href:"/profile/edit",className:"inline-block mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Editar Perfil"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Atividade Recente"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 pb-3 border-b",children:[(0,a.jsx)("div",{className:"text-2xl",children:"✅"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:"Cadastro Iniciado"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"H\xe1 2 horas"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 pb-3 border-b",children:[(0,a.jsx)("div",{className:"text-2xl",children:"\uD83D\uDCC4"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:"Documento Enviado"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"H\xe1 1 hora"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"text-2xl",children:"\uD83D\uDCAC"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:"Assistente Virtual Dispon\xedvel"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Agora"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"A\xe7\xf5es R\xe1pidas"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(i.default,{href:"/documents/upload",className:"block w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition text-center font-medium",children:"\uD83D\uDCE4 Enviar Documentos"}),(0,a.jsx)(i.default,{href:"/services/add",className:"block w-full px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition text-center font-medium",children:"➕ Adicionar Servi\xe7o"}),(0,a.jsx)(i.default,{href:"/support",className:"block w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition text-center font-medium",children:"\uD83C\uDD98 Suporte"})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg shadow-md p-6 border border-blue-200",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"\uD83D\uDCA1 Dica"}),(0,a.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Complete seu perfil enviando todos os documentos necess\xe1rios para aumentar suas chances de aprova\xe7\xe3o."}),(0,a.jsx)("p",{className:"text-gray-600 text-xs mt-3",children:"Precisa de ajuda? Clique no bot\xe3o de chat abaixo! \uD83D\uDC47"})]})]})]})]}),(0,a.jsx)(d,{})]})}},8223:function(e,t,s){"use strict";s.d(t,{ON:function(){return r}});let a=s(3464).Z.create({baseURL:"https://kw4d0mgz-3001.brs.devtunnels.ms",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let r={register:e=>a.post("/auth/register",e),login:e=>a.post("/auth/login",e),getMe:()=>a.get("/auth/me")}}},function(e){e.O(0,[464,648,971,117,744],function(){return e(e.s=6101)}),_N_E=e.O()}]);